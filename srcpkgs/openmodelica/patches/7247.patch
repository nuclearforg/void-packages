From 7697c07b233b3523f1b4d8324545091d16e41f29 Mon Sep 17 00:00:00 2001
From: Alex Chandel <637714+alexchandel@users.noreply.github.com>
Date: Mon, 1 Mar 2021 20:43:12 -0600
Subject: [PATCH] fix OMParser/Makefile for macOS

---
 OMParser/Makefile | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/OMParser/Makefile b/OMParser/Makefile
index 1c3b86a214..8524b9b906 100644
--- OMParser/Makefile
+++ OMParser/Makefile
@@ -11,7 +11,6 @@ CMAKE_TARGET = "Unix Makefiles"
 endif
 
 override CXXFLAGS += -Iinstall/include/antlr4-runtime -std=c++11 -DANTLR4CPP_STATIC
-override LDFLAGS +=-Linstall/lib -Bstatic -lantlr4-runtime -lstdc++ -Bdynamic -static-libgcc
 
 CPP_FILES=modelicaBaseListener.cpp  modelicaBaseVisitor.cpp  modelicaLexer.cpp  modelicaListener.cpp  modelicaParser.cpp  modelicaVisitor.cpp
 H_FILES=$(patsubst %.cpp,%.h,$(CPP_FILES))
@@ -21,6 +20,7 @@ all: libomcparserantlr4.a
 
 libomcparserantlr4.a: $(OBJS)
 	$(AR) -s -r $@ $(OBJS)
+	mkdir -p $(OMBUILDDIR)/lib/$(host_short)/omc/ $(OMBUILDDIR)/include/omc/
 	cp -pR $@ $(OMBUILDDIR)/lib/$(host_short)/omc/
 	cp -pR install/include/antlr4-runtime $(OMBUILDDIR)/include/omc/
 
@@ -49,4 +49,4 @@ clean-local:
 clean-runtime:
 	rm -rf 3rdParty/antlr4/runtime/Cpp/build/ 3rdParty/antlr4/runtime/Cpp/dist/ install
 
-clean: clean-local clean-runtime
\ No newline at end of file
+clean: clean-local clean-runtime
